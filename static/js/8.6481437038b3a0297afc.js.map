{"version":3,"sources":["webpack:///src/components/search/search.vue","webpack:///./src/components/search/search.vue?01dd","webpack:///./src/components/search/search.vue"],"names":["search_search","mixins","mixin","data","inputPrompt","hotkey","computed","shortcut","this","concat","searchHistory","created","_getHotKey","methods","extends_default","handlePlaylist","playlist","bottom","length","$refs","style","paddingBottom","scroll","refresh","_this","Object","search","then","res","code","jsonp_data_config","slice","deleteOneSearch","key","deleteSearchHistory","deleteAllSearch","clearSearchHistory","showConfirm","confirm","show","vuex_esm","watch","keyWord","newVal","_this2","setTimeout","components","SearchBox","search_box","SearchList","search_list","Suggest","suggest","Scroll","scroll_scroll","Confirm","confirm_confirm","components_search_search","render","_vm","_h","$createElement","_c","_self","staticClass","on","touchmove","$event","preventDefault","ref","attrs","query","keyWordChange","_v","directives","name","rawName","value","expression","_l","item","index","click","addKeyWord","k","_s","searches","select","delete","listScroll","blurInput","saveSearch","text","confirmBtnText","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.6481437038b3a0297afc.js","sourcesContent":["<template>\n  <div class=\"search\" @touchmove.prevent>\n    <div class=\"search-box-wrapper\">\n      <search-box  ref=\"searchBox\" :inputPrompt=\"inputPrompt\" @query=\"keyWordChange\"></search-box>\n    </div>\n    <scroll class=\"shortcut-wrapper\" :data=\"shortcut\" v-show=\"!keyWord\" ref=\"scroll\">\n      <div class=\"shortcut\" ref=\"shortcut\">\n        <div class=\"hot-key\">\n          <h3 class=\"title\">热门搜索</h3>\n          <div class=\"hot-key-list\">\n            <ul>\n              <li class=\"item\" v-for=\"(item,index) in hotkey\" :key=\"index\" @click=\"addKeyWord(item.k)\">{{item.k}}</li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"search-history\" v-show=\"searchHistory.length\">\n          <h3 class=\"title clearfix\">\n            <span class=\"text\">搜索历史</span>\n            <span class=\"clear\" @click=\"showConfirm\">\n              <i class=\"vue-music-icon icon-dle\"></i>\n            </span>\n          </h3>\n          <div class=\"search-list-wrapper\">\n            <search-list :searches=\"searchHistory\" @select=\"addKeyWord\" @delete=\"deleteOneSearch\"></search-list>\n          </div>\n        </div>\n      </div>\n    </scroll>\n    <div class=\"search-result\" v-show=\"keyWord\">\n      <Suggest :keyWord=\"keyWord\" @listScroll=\"blurInput\" @select=\"saveSearch\"></Suggest>\n    </div>\n    <confirm ref=\"confirm\"\n             text=\"是否要清空所有搜索记录？\"\n             confirmBtnText=\"清空\"\n             @confirm=\"deleteAllSearch\"\n    >\n    </confirm>\n    <transition name=\"slide-fade\">\n      <router-view></router-view>\n    </transition>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport SearchBox from 'base/search-box/search-box'\nimport SearchList from 'base/search-list/search-list'\nimport Suggest from 'components/suggest/suggest'\nimport Scroll from 'base/scroll/scroll'\nimport Confirm from 'base/confirm/confirm'\nimport { getHotKey } from 'api/search'\nimport { ERR_OK } from 'api/jsonp-data-config'\nimport { mapActions } from 'vuex'\nimport { searchMixin, playlistMixin } from 'common/js/mixin'\n\nexport default {\n  mixins: [searchMixin, playlistMixin],\n  data() {\n    return {\n      inputPrompt: '搜索歌曲/歌手',\n      hotkey: []\n    }\n  },\n  computed: {\n    shortcut() {\n      return this.hotkey.concat(this.searchHistory)\n    }\n  },\n  created() {\n    this._getHotKey()\n  },\n  // mounted() {\n  // setTimeout(() => {\n  //   this.$refs.scroll.refresh()\n  // }, 5000)\n  // },\n  methods: {\n    handlePlaylist(playlist) {\n      const bottom = playlist.length > 0 ? '74px' : ''\n      this.$refs.shortcut.style.paddingBottom = bottom\n      this.$refs.scroll.refresh()\n    },\n    _getHotKey() {\n      getHotKey().then(res => {\n        if (res.code === ERR_OK) {\n          this.hotkey = res.data.hotkey.slice(0, 10)\n        }\n      })\n    },\n    deleteOneSearch(key) {\n      this.deleteSearchHistory(key)\n    },\n    deleteAllSearch() {\n      this.clearSearchHistory()\n    },\n    showConfirm() {\n      this.$refs.confirm.show()\n    },\n    ...mapActions([\n      'clearSearchHistory'\n    ])\n  },\n  watch: {\n    keyWord(newVal) {\n      if (newVal) return\n      setTimeout(() => {\n        this.$refs.scroll.refresh()\n      }, 20)\n    }\n  },\n  components: {\n    SearchBox,\n    SearchList,\n    Suggest,\n    Scroll,\n    Confirm\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"~common/sass/variable\";\n.search {\n  width: 100%;\n  position: fixed;\n  top: 113px;\n  bottom: 0;\n  .search-box-wrapper {\n    margin-top: 10px;\n  }\n  .shortcut-wrapper {\n    position: fixed;\n    top: 164px;\n    bottom: 0;\n    width: 100%;\n    overflow: hidden;\n    .shortcut {\n      // height: 100%;\n      margin: 0 15px;\n      padding-top: 20px;\n      .hot-key {\n        .title {\n          font-size: $font-size-s-x;\n          color: $color-theme-text-s;\n        }\n        .hot-key-list {\n          padding: 15px 0;\n          ul {\n            margin: -10px 0 0 -15px;\n            .item {\n              display: inline-block;\n              font-size: $font-size-m;\n              color: $color-text-l;\n              background-color: #222937;\n              padding: 6px;\n              margin-left: 15px;\n              margin-top: 10px;\n              border-radius: 3px;\n            }\n          }\n        }\n      }\n      .search-history {\n        .title {\n          display: flex;\n          align-items: center;\n          font-size: $font-size-s-x;\n          color: $color-theme-text-s;\n          .text {\n            flex: 1;\n          }\n          .clear {\n            padding: 6px;\n            margin-right: -6px;\n          }\n        }\n      }\n    }\n  }\n  .search-result {\n    position: fixed;\n    top: 164px;\n    bottom: 0;\n    width: 100%;\n  }\n}\n.clearfix:after {\n  content: \"\";\n  display: block;\n  clear: both;\n}\n.slide-fade-enter-active,\n.slide-fade-leave-active {\n  transition: all 0.5s ease;\n}\n.slide-fade-enter, .slide-fade-leave-to /* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n  // transform: translate3d(100%,0,0)\n  transform: scale(0);\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\",on:{\"touchmove\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"search-box-wrapper\"},[_c('search-box',{ref:\"searchBox\",attrs:{\"inputPrompt\":_vm.inputPrompt},on:{\"query\":_vm.keyWordChange}})],1),_vm._v(\" \"),_c('scroll',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.keyWord),expression:\"!keyWord\"}],ref:\"scroll\",staticClass:\"shortcut-wrapper\",attrs:{\"data\":_vm.shortcut}},[_c('div',{ref:\"shortcut\",staticClass:\"shortcut\"},[_c('div',{staticClass:\"hot-key\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"热门搜索\")]),_vm._v(\" \"),_c('div',{staticClass:\"hot-key-list\"},[_c('ul',_vm._l((_vm.hotkey),function(item,index){return _c('li',{key:index,staticClass:\"item\",on:{\"click\":function($event){_vm.addKeyWord(item.k)}}},[_vm._v(_vm._s(item.k))])}))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory.length),expression:\"searchHistory.length\"}],staticClass:\"search-history\"},[_c('h3',{staticClass:\"title clearfix\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"搜索历史\")]),_vm._v(\" \"),_c('span',{staticClass:\"clear\",on:{\"click\":_vm.showConfirm}},[_c('i',{staticClass:\"vue-music-icon icon-dle\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"search-list-wrapper\"},[_c('search-list',{attrs:{\"searches\":_vm.searchHistory},on:{\"select\":_vm.addKeyWord,\"delete\":_vm.deleteOneSearch}})],1)])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.keyWord),expression:\"keyWord\"}],staticClass:\"search-result\"},[_c('Suggest',{attrs:{\"keyWord\":_vm.keyWord},on:{\"listScroll\":_vm.blurInput,\"select\":_vm.saveSearch}})],1),_vm._v(\" \"),_c('confirm',{ref:\"confirm\",attrs:{\"text\":\"是否要清空所有搜索记录？\",\"confirmBtnText\":\"清空\"},on:{\"confirm\":_vm.deleteAllSearch}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide-fade\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-35df964a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"audio\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-35df964a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-35df964a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"audio\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-35df964a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}